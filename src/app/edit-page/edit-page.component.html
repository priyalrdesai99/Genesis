<script>
    currid=0;
    $(document).ready(function () {
        $('#blocks img').attr("draggable", "true");
        $('#blocks img').attr("ondragstart", "drag(event)");
        $('#editpage *').css("position", "relative");
        $('#editpage').attr("ondrop", "drop(event)");
        $('#editpage').attr("ondragover", "allowDrop(event)");
        $('#editpage').attr("ondragleave", "allowDropOver(event)");
        $('#editpage div').attr("ondragleave", "allowDropOver(event)");
        // $('#editpage div').attr("onhover", "hover(event)");
     $('#editpage div').attr("ondragover", "allowDrop(event)");
        
    });
    function allowDrop(ev) {
        ev.preventDefault();
        
        targ=document.getElementById(ev.target.id);
        
        if(targ!=null && targ.tagName=="DIV" && targ!=document.getElementById("editpage"))
        {
            targ.style.border="1px solid blue";
            console.log(targ.tagName);
        }
       
    }

    function allowDropOver(ev) {
        ev.preventDefault();
        targ=document.getElementById(ev.target.id);
        if(targ!=null && targ!=document.getElementById("editpage")){
            targ.style.border="0px solid blue";
            console.log("here"+targ.id);
        }
        
    }

    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    
    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        console.log(data);
        var img1=document.getElementById(data);
        
        var temp=document.getElementById(img1.getAttribute("htmlsrc"));
        
        var div = document.createElement('div');
        div.innerHTML = temp.innerHTML.trim();


        div=div.firstChild;
        div.id=currid;
        currid++;
        
        console.log(div);
        parent = event.target.parentElement;
        
        if (event.target != document.getElementById("editpage")) {
            document.getElementById("editpage").insertBefore(div, ev.target);
            console.log("other");
            ev.target.style.border="0px solid blue";
        }
        else {
            document.getElementById("editpage").appendChild(div);
            //        document.getElementById("editpage").style("height","auto");
            console.log("this");
        }
        // $('#editpage div').hover(function(event){
        //     $(this).css("border","1px solid blue");
        // },function(event){
        //     $(this).css("border","0px solid blue");
        // });
        $('#editpage *').click(function(){
            console.log($(this).attr('id'));
            function1($(this).attr('id'));
            });
    }
    function drope(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        
        parent = event.target.parentElement;
        console.log("target");
        console.log(ev.target.id);
        
        if(event.target!=document.getElementById("editpage")){
            document.getElementById("editpage").insertBefore(document.getElementById(data),ev.target);
            console.log("other");
        }
        else{
            document.getElementById("editpage").appendChild(document.getElementById(data));
    //        document.getElementById("editpage").style("height","auto");
    console.log("this");
        }
        // $('#editpage div').hover(function(event){
        //     $(this).css("border","1px solid blue");
        // },function(event){
        //     $(this).css("border","0px solid blue");
        // });
        $('#editpage *').click(function(){
            console.log($(this).attr('id'));
            function1($(this).attr('id'));
            });
    }

    function save() {
        alert(document.getElementById("editpage").innerHTML);
    }

    function function1(id){
    // ele=document.getElementById(id);
    console.log(id);
    // curtext=document.getElementById('curtext');
    // curtext.value=ele.innerHTML;
    // curid=id;
}
</script>

<div class="cotainer-fluid">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="width:100%; position:fixed; border-radius:0px; margin-bottom:0px; height:10%; z-index:1;">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
          
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <img src="./img1.png" class="float-left mt-sm-2 mb-sm-2" style="width:11em;  border:2px solid #17cad4; border-radius:7px; position: relative;">
              <ul class="navbar-nav mr-auto navbar-right">
                <li class="nav-item dropdown">
                  <a class="nav-link btn btn-outline-info dropdown-toggle text-light" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Welcome Ghata!
                  </a>
                  <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="#">My profile</a>
                    <a class="dropdown-item" href="#">Change Plan</a>
                    <a class="dropdown-item" href="#">Change Password</a>
                    
                  </div>
                </li>
                <li class="nav-item">
                  <a class="nav-link text-light" href="#" tabindex="-1" aria-disabled="true">Logout</a>
                </li>
              </ul>
            </div>
          </nav>

<br style="border:1px solid #17cad4; margin:0,0; padding:0,0;"/>

<ul class="nav nav-pills nav-stacked flex-column bg-dark navbar-dark" style="position:fixed;height:100%;width:10%;padding-top:15%;display:none">
    <li class="nav-item text-light">
        <a class="nav-link active bg-info text-light" href="#">Blocks</a>
    </li>
    <li class="nav-item">
        <a class="nav-link text-light" href="#">Header</a>
    </li>
    <li class="nav-item">
        <a class="nav-link text-light" href="#">Footer</a>
    </li>
    <li class="nav-item">
        <a class="nav-link disabled" href="#">Content</a>
    </li>
</ul>
<ul class="nav nav-pills nav-stacked flex-column bg-light" style="position: fixed; height:100%;width:15%; padding-top:3%; z-index: -2;">
    <li class="nav-item text-light">
        //toggle
    </li>
    <li class="nav-item">
    <div id="blocks">
        <img id="cl123" src="blockimages/Capture.PNG" style="max-width: 90%; height:5em;"  htmlsrc='t1'>
        <template id="t1">
                <div style="max-width:100%; border:1px solid black;margin:0.5em;">
                        <h1 id="h12">Head1</h1>
                        <p id="h13">Welcome to sample site</p>
                    </div>
        </template>
        <img id="cl124" src="blockimages/C1.PNG" style="max-width: 90%; height:5em;"  htmlsrc='t2'>
        <template id="t2">
        <div id="bl2" style="width:100%;">
            <h1 id="h14">Head1</h1>
            <p id="h15">Thank You for visiting sample site</p>
            <br>
            <br>
        </div>
    </template>
        <div id="bl3" style="width:100%;">
            <h1 id="h16">Head3456</h1>
            <p id="h17">Thank You for visiting sample site</p>
        </div>
    </div>
    </li>
    
</ul>
<!--<div id="blockbar" style="position:fixed;height:100%;width:15rem;background-color:#373b40;color:white;padding-top:6rem;left:15rem;">abcdefghikjksddaldklak</div>-->

<div style="position:absolute; top:15%; left:17%; display:inline-block; right:0px;">
    <div class="pagename" style="position:absolute;padding:0px; display:block; font-size:23px;">
        Page Name
    </div>
    <div style="display:block; position:absolute; right:0px;   align-self:baseline;">
        <a class="savebtn" href="#" role="button" style="padding:4px;margin-right:2rem;" onclick="save()">Save</a>
        <a class="savebtn" href="#" role="button" style="padding:4px;margin-right:2rem;">Delete</a>
    </div>
    <br />
    <br />
    <hr />

    
        <div style="display:inline-block;border:1px solid #dae1f0; position:absolute; height:35em;width:75%;overflow: auto;" id="editpage">
        
        </div>
        
            <div class="menu" style="position: absolute;width:22%;border:1px solid black;left:77%;height:auto;" >
    Menu    
            </div>
      <div style="display: block;position: absolute;top:40em; visibility: hidden;">
            <br>
            as
      </div>          
</div>
<br>
<br>

</div>
